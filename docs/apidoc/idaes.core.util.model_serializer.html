

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>idaes.core.util.model_serializer module &mdash; IDAES v1.0.0</title>
  

  
  
    <link rel="shortcut icon" href="../_static/idaes-logo.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/theme_and_schema.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> IDAES
          

          
            
            <img src="../_static/idaes-logo-100x100.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../standards.html">IDAES Modeling Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/index.html">Core Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models/index.html">Unit Model Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../property_models/index.html">Property Model Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmf/index.html">Data Management Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../version.html">IDAES versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Sample Models and Flowsheets</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IDAES</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>idaes.core.util.model_serializer module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/apidoc/idaes.core.util.model_serializer.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-idaes.core.util.model_serializer">
<span id="idaes-core-util-model-serializer-module"></span><h1>idaes.core.util.model_serializer module<a class="headerlink" href="#module-idaes.core.util.model_serializer" title="Permalink to this headline">¶</a></h1>
<p>Functions for saving and loading Pyomo objects to json</p>
<dl class="class">
<dt id="idaes.core.util.model_serializer.Counter">
<em class="property">class </em><code class="descclassname">idaes.core.util.model_serializer.</code><code class="descname">Counter</code><a class="reference internal" href="../_modules/idaes/core/util/model_serializer.html#Counter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.util.model_serializer.Counter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This is a counter object, which is an easy way to pass an interger pointer
around between methods.</p>
</dd></dl>

<dl class="class">
<dt id="idaes.core.util.model_serializer.StoreSpec">
<em class="property">class </em><code class="descclassname">idaes.core.util.model_serializer.</code><code class="descname">StoreSpec</code><span class="sig-paren">(</span><em>classes=((&lt;class 'pyomo.core.base.param.Param'&gt;</em>, <em>('_mutable'</em>, <em>))</em>, <em>(&lt;class 'pyomo.core.base.var.Var'&gt;</em>, <em>())</em>, <em>(&lt;class 'pyomo.core.base.component.Component'&gt;</em>, <em>('active'</em>, <em>)))</em>, <em>data_classes=((&lt;class 'pyomo.core.base.var._VarData'&gt;</em>, <em>('fixed'</em>, <em>'stale'</em>, <em>'value'</em>, <em>'lb'</em>, <em>'ub'))</em>, <em>(&lt;class 'pyomo.core.base.param._ParamData'&gt;</em>, <em>('value'</em>, <em>))</em>, <em>(&lt;class 'int'&gt;</em>, <em>('value'</em>, <em>))</em>, <em>(&lt;class 'float'&gt;</em>, <em>('value'</em>, <em>))</em>, <em>(&lt;class 'pyomo.core.base.component.ComponentData'&gt;</em>, <em>('active'</em>, <em>)))</em>, <em>skip_classes=(&lt;class 'pyomo.core.base.external.ExternalFunction'&gt;</em>, <em>&lt;class 'pyomo.core.base.sets.Set'&gt;</em>, <em>&lt;class 'pyomo.network.port.Port'&gt;</em>, <em>&lt;class 'pyomo.core.base.expression.Expression'&gt;</em>, <em>&lt;class 'pyomo.core.base.rangeset.RangeSet'&gt;)</em>, <em>ignore_missing=True</em>, <em>suffix=True</em>, <em>suffix_filter=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/util/model_serializer.html#StoreSpec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.util.model_serializer.StoreSpec" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A StoreSpec object tells the serializer functions what to read or write.
The default settings will produce a StoreSpec configured to load/save the
typical attributes required to load/save a model state.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>classes</strong> – A list of classes to save.  Each class is represented by a
list (or tupple) containing the following elements: (1) class
(compared using isinstance) (2) attribute list or None, an emptry
list store the object, but none of its attributes, None will not
store objects of this class type (3) optional load filter function.
The load filter function returns a list of attributes to read based
on the state of an object and its saved state. The allows, for
example, loading values for unfixed variables, or only loading
values whoes current value is less than one. The filter function
only applies to load not save. Filter functions take two arguments
(a) the object (current state) and (b) the dictionary containing the
saved state of an object.  More specific classes should come before
more general classes.  For example if an obejct is a HeatExchanger
and a UnitModel, and HeatExchanger is listed first, it will follow
the HeatExchanger settings.  If UnitModel is listed first in the
classes list, it will follow the UnitModel settings.</li>
<li><strong>data_classes</strong> – This takes the same form as the classes argument.
This is for component data classes.</li>
<li><strong>skip_classes</strong> – This is a list of classes to skip.  If a class appears
in the skip list, but also appears in the classes argument, the
classes argument will override skip_classes. The use for this is to
specifically exclude certain classes that would get caught by more
general classes (e.g. UnitModel is in the class list, but you want
to exclude HeatExchanger which is derived from UnitModel).</li>
<li><strong>ignore_missing</strong> – If True will ignore a component or attribute that exists
in the model, but not in the stored state. If false an excpetion
will be raised for things in the model that should be loaded but
aren’t in the stored state. Extra items in the stored state will not
raise an exception regaurdless of this argument.</li>
<li><strong>suffix</strong> – If True store suffixes and component ids.  If false, don’t store
suffixes.</li>
<li><strong>suffix_filter</strong> – None to store all siffixes if suffix=True, or a list of
suffixes to store if suffix=True</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="classmethod">
<dt id="idaes.core.util.model_serializer.StoreSpec.bound">
<em class="property">classmethod </em><code class="descname">bound</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/util/model_serializer.html#StoreSpec.bound"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.util.model_serializer.StoreSpec.bound" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a StoreSpec object to store variable bounds only.</p>
</dd></dl>

<dl class="method">
<dt id="idaes.core.util.model_serializer.StoreSpec.get_class_attr_list">
<code class="descname">get_class_attr_list</code><span class="sig-paren">(</span><em>o</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/util/model_serializer.html#StoreSpec.get_class_attr_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.util.model_serializer.StoreSpec.get_class_attr_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up what attributes to save/load for an Component object.
:param o: Object to look up attribute list for.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list of attributes and a filter function for object type</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="idaes.core.util.model_serializer.StoreSpec.get_data_class_attr_list">
<code class="descname">get_data_class_attr_list</code><span class="sig-paren">(</span><em>o</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/util/model_serializer.html#StoreSpec.get_data_class_attr_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.util.model_serializer.StoreSpec.get_data_class_attr_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up what attributes to save/load for an ComponentData object.
:param o: Object to look up attribute list for.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list of attributes and a filter function for object type</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="idaes.core.util.model_serializer.StoreSpec.isfixed">
<em class="property">classmethod </em><code class="descname">isfixed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/util/model_serializer.html#StoreSpec.isfixed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.util.model_serializer.StoreSpec.isfixed" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a StoreSpec object to store if variables are fixed.</p>
</dd></dl>

<dl class="method">
<dt id="idaes.core.util.model_serializer.StoreSpec.set_read_callback">
<code class="descname">set_read_callback</code><span class="sig-paren">(</span><em>attr</em>, <em>cb=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/util/model_serializer.html#StoreSpec.set_read_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.util.model_serializer.StoreSpec.set_read_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a callback to set an attribute, when reading from json or dict.</p>
</dd></dl>

<dl class="method">
<dt id="idaes.core.util.model_serializer.StoreSpec.set_write_callback">
<code class="descname">set_write_callback</code><span class="sig-paren">(</span><em>attr</em>, <em>cb=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/util/model_serializer.html#StoreSpec.set_write_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.util.model_serializer.StoreSpec.set_write_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a callback to get an attribute, when writing to json or dict.</p>
</dd></dl>

<dl class="classmethod">
<dt id="idaes.core.util.model_serializer.StoreSpec.suffix">
<em class="property">classmethod </em><code class="descname">suffix</code><span class="sig-paren">(</span><em>suffix_filter=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/util/model_serializer.html#StoreSpec.suffix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.util.model_serializer.StoreSpec.suffix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="idaes.core.util.model_serializer.StoreSpec.value">
<em class="property">classmethod </em><code class="descname">value</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/util/model_serializer.html#StoreSpec.value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.util.model_serializer.StoreSpec.value" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a StoreSpec object to store variable values only.</p>
</dd></dl>

<dl class="classmethod">
<dt id="idaes.core.util.model_serializer.StoreSpec.value_isfixed">
<em class="property">classmethod </em><code class="descname">value_isfixed</code><span class="sig-paren">(</span><em>only_fixed</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/util/model_serializer.html#StoreSpec.value_isfixed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.util.model_serializer.StoreSpec.value_isfixed" title="Permalink to this definition">¶</a></dt>
<dd><p>Retur a StoreSpec object to store variable values and if fixed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>only_fixed</strong> – Only load fixed variable values</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="idaes.core.util.model_serializer.StoreSpec.value_isfixed_isactive">
<em class="property">classmethod </em><code class="descname">value_isfixed_isactive</code><span class="sig-paren">(</span><em>only_fixed</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/util/model_serializer.html#StoreSpec.value_isfixed_isactive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.util.model_serializer.StoreSpec.value_isfixed_isactive" title="Permalink to this definition">¶</a></dt>
<dd><p>Retur a StoreSpec object to store variable values, if variables are
fixed and if components are active.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>only_fixed</strong> – Only load fixed variable values</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="idaes.core.util.model_serializer.component_data_from_dict">
<code class="descclassname">idaes.core.util.model_serializer.</code><code class="descname">component_data_from_dict</code><span class="sig-paren">(</span><em>sd</em>, <em>o</em>, <em>wts</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/util/model_serializer.html#component_data_from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.util.model_serializer.component_data_from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Component data to a dict.</p>
</dd></dl>

<dl class="function">
<dt id="idaes.core.util.model_serializer.component_data_to_dict">
<code class="descclassname">idaes.core.util.model_serializer.</code><code class="descname">component_data_to_dict</code><span class="sig-paren">(</span><em>o</em>, <em>wts</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/util/model_serializer.html#component_data_to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.util.model_serializer.component_data_to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Component data to a dict.</p>
</dd></dl>

<dl class="function">
<dt id="idaes.core.util.model_serializer.from_json">
<code class="descclassname">idaes.core.util.model_serializer.</code><code class="descname">from_json</code><span class="sig-paren">(</span><em>o</em>, <em>sd=None</em>, <em>fname=None</em>, <em>s=None</em>, <em>wts=None</em>, <em>gz=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/util/model_serializer.html#from_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.util.model_serializer.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the state of a Pyomo component state from a dictionary, json file, or
json string.  Must only specify one of sd, fname, or s as a non-None value.
This works by going through the model and loading the state of each
sub-compoent of o. If the saved state contains extra information, it is
ignored.  If the save state doesn’t contain an enetry for a model component
that is to be loaded an error will be raised, unless ignore_missing = True.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>o</strong> – Pyomo component to for which to load state</li>
<li><strong>sd</strong> – State dictionary to load, if None, check fname and s</li>
<li><strong>fname</strong> – JSON file to load, only used if sd is None</li>
<li><strong>s</strong> – JSON string to load only used if both sd and fname are None</li>
<li><strong>wts</strong> – StoreSpec object specifying what to load</li>
<li><strong>gz</strong> – If True assume the file specified by fname is gzipped. The default is
False.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Dictionary with some perfomance information. The keys are
“etime_load_file”, how long in seconds it took to load the json file
“etime_read_dict”, how long in seconds it took to read models state
“etime_read_suffixes”, how long in seconds it took to read suffixes</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="idaes.core.util.model_serializer.to_json">
<code class="descclassname">idaes.core.util.model_serializer.</code><code class="descname">to_json</code><span class="sig-paren">(</span><em>o</em>, <em>fname=None</em>, <em>human_read=False</em>, <em>wts=None</em>, <em>metadata={}</em>, <em>gz=False</em>, <em>return_dict=False</em>, <em>return_json_string=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/idaes/core/util/model_serializer.html#to_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#idaes.core.util.model_serializer.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the state of a model to a Python dictionary, and optionally dump it
to a json file.  To load a model state, a model with the same structure must
exist.  The model itself cannot be recreated from this.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>o</strong> – The Pyomo component object to save.  Usually a Pyomo model, but could
also be a subcomponent of a model (usually a sub-block).</li>
<li><strong>fname</strong> – json file name to save model state, if None only create
python dict</li>
<li><strong>gz</strong> – If fname is given and gv is True gzip the json file. The default is
False.</li>
<li><strong>human_read</strong> – if True, add indents and spacing to make the json file more
readable, if false cut out whitespace and make as compact as
possilbe</li>
<li><strong>metadata</strong> – A dictionary of addtional metadata to add.</li>
<li><strong>wts</strong> – is What To Save, this is a StoreSpec object that specifies what
object types and attributes to save.  If None, the default is used
which saves the state of the compelte model state.</li>
<li><strong>metadata</strong> – addtional metadata to save beyond the standard format_version,
date, and time.</li>
<li><strong>return_dict</strong> – default is False if true returns a dictionary representation</li>
<li><strong>return_json_string</strong> – default is False returns a json string</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">If return_dict is True returns a dictionary serialization of the Pyomo
component.  If return_dict is False and return_json_string is True
returns a json string dump of the dict.  If fname is given the dictionary
is also written to a json file.  If gz is True and fname is given, writes
a gzipped json file.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2019, David Miller et al.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>